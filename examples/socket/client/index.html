<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>websocket 测试</title>
</head>

<body>
  <button type="button" id='say'>say</button>
  <script src="/lib/socket.io-client/dist/socket.io.js"></script>
  <script>
    window.onload = function () {
      var doc = document;
      var sayButton = doc.getElementById('say');
      var socket = io.connect('//localhost:3000')

      socket.on('me', function (data) {
        console.log(data);
      });

      sayButton.addEventListener('click', sayHandle, false);

      function sayHandle() {
        socket.emit('say', "I hate girl");
        //不要在事件处理函数里面监听message, 重复监听
        // socket.on('message', function(msg) {})
      }

      socket.on('message', function (msg) {
        console.log(msg);
      });
    }
  </script>
</body>

</html>
